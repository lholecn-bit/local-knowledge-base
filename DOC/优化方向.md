æˆ‘æ¥ä»äº§å“çš„è§’åº¦è¿›è¡Œå…¨é¢è¯„ä¼°ï¼Œåˆ†æä½ çš„çŸ¥è¯†åº“ç³»ç»Ÿçš„ä¼˜ç¼ºç‚¹å’Œä¼˜åŒ–æ–¹å‘ã€‚

## ğŸ“Š **äº§å“è¯„ä¼°æŠ¥å‘Š**

### âœ… **ç°æœ‰ä¼˜åŠ¿**

| æ–¹é¢               | è¯„åˆ†     | è¯´æ˜                                       |
| ------------------ | -------- | ------------------------------------------ |
| **æ ¸å¿ƒåŠŸèƒ½** | â­â­â­â­ | æ”¯æŒä¸Šä¼ ã€æœç´¢ã€Re-Rankingï¼ŒåŠŸèƒ½å®Œæ•´       |
| **æŠ€æœ¯æ ˆ**   | â­â­â­â­ | LangChain + FAISS + CrossEncoderï¼Œä¸šç•Œæ ‡å‡† |
| **å®¹é”™èƒ½åŠ›** | â­â­â­   | æœ‰åŸºç¡€å¼‚å¸¸å¤„ç†ï¼Œä½†ä¸å¤Ÿå®Œå–„                 |
| **ç”¨æˆ·ä½“éªŒ** | â­â­â­   | èƒ½ç”¨ï¼Œä½†æ²¡æœ‰ä¼˜åŒ–                           |
| **å¯ç»´æŠ¤æ€§** | â­â­â­   | ä»£ç æ¸…æ™°ï¼Œä½†ç¼ºå°‘æ–‡æ¡£å’Œæ—¥å¿—                 |
| **æ‰©å±•æ€§**   | â­â­     | æ¶æ„ä¸å¤Ÿçµæ´»ï¼Œéš¾ä»¥æ‰©å±•                     |
| **æ€§èƒ½**     | â­â­â­   | å¯ç”¨ï¼Œä½†æœªä¼˜åŒ–                             |

---

### ğŸ”´ **å…³é”®é—®é¢˜**

#### **1. ç”¨æˆ·ä½“éªŒé—®é¢˜** ğŸ¯

```
âŒ ä¸Šä¼ å¤§æ–‡ä»¶å¡æ­»ï¼ˆæ— è¿›åº¦åé¦ˆï¼‰
âŒ æœç´¢æ…¢ä½†ä¸çŸ¥é“åŸå› ï¼ˆæ— æ€§èƒ½æŒ‡æ ‡ï¼‰
âŒ æ— æ³•äº†è§£çŸ¥è¯†åº“å†…å®¹è´¨é‡
âŒ é”™è¯¯æç¤ºä¸å‹å¥½ï¼Œä¸çŸ¥é“æ€ä¹ˆè§£å†³
âŒ æ— ä½¿ç”¨ç»Ÿè®¡ï¼Œä¸çŸ¥é“ç³»ç»Ÿå¥åº·åº¦
```

#### **2. ç³»ç»Ÿå¯é æ€§é—®é¢˜** ğŸ›¡ï¸

```
âŒ ä¸æ”¯æŒæ–‡ä»¶å»é‡ï¼ˆå¯èƒ½é‡å¤ä¸Šä¼ ï¼‰
âŒ æ— å¤‡ä»½æœºåˆ¶ï¼ˆæ•°æ®å¯èƒ½ä¸¢å¤±ï¼‰
âŒ æ— æƒé™æ§åˆ¶ï¼ˆæ‰€æœ‰äººéƒ½èƒ½åˆ é™¤ï¼‰
âŒ æ— å®¡è®¡æ—¥å¿—ï¼ˆæ— æ³•è¿½è¸ªæ“ä½œå†å²ï¼‰
âŒ ç¼“å­˜ç­–ç•¥ä¸æ¸…æ™°ï¼ˆä¸çŸ¥é“ä½•æ—¶æ›´æ–°ï¼‰
```

#### **3. åŠŸèƒ½å®Œæ•´æ€§é—®é¢˜** ğŸ”§

```
âŒ ä¸æ”¯æŒå¢é‡æ›´æ–°ï¼ˆå…¨é‡é‡å»ºï¼‰
âŒ ä¸æ”¯æŒç‰ˆæœ¬ç®¡ç†ï¼ˆæ–‡æ¡£æ›´æ–°æ— å†å²ï¼‰
âŒ ä¸æ”¯æŒåˆ†ç±»ç®¡ç†ï¼ˆæ‰€æœ‰æ–‡æ¡£æ··åœ¨ä¸€èµ·ï¼‰
âŒ ä¸æ”¯æŒæ ‡ç­¾/å…ƒæ•°æ®ï¼ˆéš¾ä»¥ç»„ç»‡ï¼‰
âŒ ä¸æ”¯æŒæ‰¹é‡æ“ä½œï¼ˆæ•ˆç‡ä½ï¼‰
```

#### **4. æœç´¢è´¨é‡é—®é¢˜** ğŸ”

```
âŒ ç¡¬é˜ˆå€¼ä¸é€‚åº”ä¸åŒåœºæ™¯
âŒ æ— æ³•è¡¡é‡æœç´¢è´¨é‡ï¼ˆç²¾åº¦/å¬å›ç‡ï¼‰
âŒ æ— æœç´¢æ—¥å¿—åˆ†æ
âŒ ä¸æ”¯æŒæœç´¢çº æ­£
âŒ ä¸æ”¯æŒåŒä¹‰è¯/åˆ«å
```

---

## ğŸ¯ **ä¼˜åŒ–æ–¹å‘ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰**

### **ç¬¬ä¸€ä¼˜å…ˆçº§ï¼šä½“éªŒå’Œå¯é æ€§** âš¡

#### **1.1 æ·»åŠ è¿›åº¦æ¡å’Œå®æ—¶åé¦ˆ**

```python
# ä¸Šä¼ æ–‡ä»¶æ—¶æ˜¾ç¤ºè¿›åº¦
- ä¸Šä¼ è¿›åº¦: 50% âœ“
- å¤„ç†è¿›åº¦: æ­£åœ¨å¤„ç†ç¬¬ 2 ä¸ªæ–‡ä»¶...
- å‘é‡åŒ–è¿›åº¦: 200/500 chunks...
- ä¿å­˜è¿›åº¦: 95%
```

#### **1.2 æ·»åŠ ç³»ç»Ÿç›‘æ§é¢æ¿**

```
ğŸ“Š çŸ¥è¯†åº“å¥åº·åº¦
â”œâ”€ æ€»æ–‡æ¡£æ•°: 42
â”œâ”€ æ€» Chunks: 2,150
â”œâ”€ å¹³å‡åˆ†æ•°: 0.82 âœ…
â”œâ”€ æœ€åæ›´æ–°: 2025-12-19 16:35
â””â”€ å­˜å‚¨å¤§å°: 245 MB
```

#### **1.3 æ–‡ä»¶å»é‡å’Œç‰ˆæœ¬ç®¡ç†**

```python
# è®¡ç®—æ–‡ä»¶å“ˆå¸Œï¼Œé¿å…é‡å¤
file_hash = calculate_hash(file_content)
if file_hash in existing_hashes:
    return "âš ï¸ è¯¥æ–‡ä»¶å·²å­˜åœ¨"

# ç‰ˆæœ¬æ§åˆ¶
æ–‡ä»¶å†å²:
  v3 (2025-12-19 16:35) - æœ€æ–°
  v2 (2025-12-19 15:20) - ä¿®å¤äº† 3 å¤„é”™è¯¯
  v1 (2025-12-19 14:00) - åˆå§‹ç‰ˆæœ¬
```

#### **1.4 æƒé™å’Œå®¡è®¡æ—¥å¿—**

```python
# è®°å½•æ‰€æœ‰æ“ä½œ
æ“ä½œæ—¥å¿—:
  [16:35] user@company.com ä¸Šä¼ äº† RAG_GUIDE.md (2.3MB)
  [16:30] admin@company.com åˆ é™¤äº† OLD_VERSION.md
  [16:25] user@company.com æ‰§è¡Œäº†æœç´¢æŸ¥è¯¢ "RAG"
```

---

### **ç¬¬äºŒä¼˜å…ˆçº§ï¼šåŠŸèƒ½å®Œæ•´æ€§** ğŸ”§

#### **2.1 æ·»åŠ åˆ†ç±»/æ ‡ç­¾ç³»ç»Ÿ**

```python
# ç»„ç»‡ç»“æ„
çŸ¥è¯†åº“/
â”œâ”€ æŠ€æœ¯æ–‡æ¡£/
â”‚  â”œâ”€ RAG ç³»ç»Ÿ
â”‚  â”œâ”€ å‘é‡æ•°æ®åº“
â”‚  â””â”€ LLM æ¨¡å‹
â”œâ”€ å¸¸è§é—®é¢˜/
â”œâ”€ äº§å“è§„èŒƒ/
â””â”€ å½’æ¡£/
```

#### **2.2 å¢é‡æ›´æ–°è€Œä¸æ˜¯å…¨é‡é‡å»º**

```python
# å½“å‰ï¼šé‡æ–°å¤„ç†æ‰€æœ‰æ–‡ä»¶ âŒ
# ä¼˜åŒ–ï¼šåªå¤„ç†æ–°å¢/ä¿®æ”¹çš„æ–‡ä»¶ âœ…
added = kb.add_documents(new_files)      # åªæ–°å¢
updated = kb.update_documents(changed)   # åªæ›´æ–°
deleted = kb.delete_documents(removed)   # åªåˆ é™¤
```

#### **2.3 æ”¯æŒæ‰¹é‡æ“ä½œ**

```python
# æ”¯æŒæ‰¹é‡ä¸Šä¼ ã€åˆ é™¤ã€æ›´æ–°
kb.batch_upload(files_list)
kb.batch_delete(filenames_list)
kb.batch_tag(documents, tags)
```

#### **2.4 å…ƒæ•°æ®å¢å¼º**

```python
# æ‰©å±•å…ƒæ•°æ®
{
    'source': 'RAG_GUIDE.md',
    'created_at': '2025-12-19',
    'updated_at': '2025-12-19',
    'category': 'æŠ€æœ¯æ–‡æ¡£',
    'tags': ['RAG', 'LLM', 'å…¥é—¨'],
    'author': 'team@company.com',
    'version': '2.1',
    'status': 'approved',  # draft, approved, archived
    'confidence': 0.95,    # å†…å®¹è´¨é‡è¯„åˆ†
}
```

---

### **ç¬¬ä¸‰ä¼˜å…ˆçº§ï¼šæœç´¢è´¨é‡ä¼˜åŒ–** ğŸ”

#### **3.1 åŠ¨æ€é˜ˆå€¼è€Œä¸æ˜¯ç¡¬ç¼–ç **

```python
# å½“å‰ï¼š0.3 çš„ç¡¬é˜ˆå€¼
# ä¼˜åŒ–ï¼šæ ¹æ®ä½¿ç”¨åœºæ™¯åŠ¨æ€è°ƒæ•´

class AdaptiveThreshold:
    def get_threshold(self, query: str, mode: str) -> float:
        # æ ¹æ®æŸ¥è¯¢é•¿åº¦
        if len(query) < 10:
            threshold = 0.2  # çŸ­æŸ¥è¯¢æ”¾å®½
        else:
            threshold = 0.4  # é•¿æŸ¥è¯¢ä¸¥æ ¼
      
        # æ ¹æ®å†å²æ•ˆæœè°ƒæ•´
        if is_high_bounce_query(query):
            threshold = 0.15  # é™ä½é˜ˆå€¼
      
        return threshold
```

#### **3.2 æœç´¢è´¨é‡è¯„ä¼°**

```python
# ç²¾åº¦/å¬å›ç‡ç›‘æ§
ç²¾åº¦ (Precision): è¿”å›çš„ç›¸å…³æ–‡æ¡£ / è¿”å›æ€»æ•°
å¬å›ç‡ (Recall): è¿”å›çš„ç›¸å…³æ–‡æ¡£ / æ‰€æœ‰ç›¸å…³æ–‡æ¡£

å½“å‰: ç²¾åº¦ 0.82, å¬å›ç‡ 0.65
ç›®æ ‡: ç²¾åº¦ 0.90+, å¬å›ç‡ 0.85+
```

#### **3.3 æœç´¢æ—¥å¿—åˆ†æ**

```python
# è®°å½•å’Œåˆ†ææ¯æ¬¡æœç´¢
æœç´¢åˆ†æ:
  - æœ€å—æ¬¢è¿çš„æŸ¥è¯¢: "RAG æ˜¯ä»€ä¹ˆ" (125 æ¬¡)
  - ä½æ•ˆæŸ¥è¯¢: "xxxxx" (æ— ç»“æœ)
  - å¹³å‡å“åº”æ—¶é—´: 0.35s
  - P95 å“åº”æ—¶é—´: 2.1s
```

#### **3.4 åŒä¹‰è¯å’Œåˆ«åæ”¯æŒ**

```python
# å»ºç«‹åŒä¹‰è¯åº“
synonyms = {
    'RAG': ['æ£€ç´¢å¢å¼ºç”Ÿæˆ', 'Retrieval Augmented Generation'],
    'LLM': ['å¤§è¯­è¨€æ¨¡å‹', 'å¤§æ¨¡å‹'],
    'embedding': ['åµŒå…¥', 'å‘é‡è¡¨ç¤º'],
}

# æŸ¥è¯¢æ‰©å±•
expanded_query = expand_with_synonyms(original_query)
```

---

### **ç¬¬å››ä¼˜å…ˆçº§ï¼šæ€§èƒ½ä¼˜åŒ–** âš¡

#### **4.1 ç¼“å­˜ç­–ç•¥**

```python
# çƒ­æŸ¥è¯¢ç¼“å­˜
cache = {
    "RAG æ˜¯ä»€ä¹ˆ": [cached_results],  # ç¼“å­˜ 1 å°æ—¶
    "å‘é‡æ•°æ®åº“": [cached_results],
}

# å‘½ä¸­ç‡: 35%
# ç¼“å­˜å¯èŠ‚çœ: 0.5s * 0.35 = 0.175s
```

#### **4.2 å¼‚æ­¥å¤„ç†**

```python
# å½“å‰ï¼šåŒæ­¥ä¸Šä¼  (ç”¨æˆ·ç­‰å¾…)
# ä¼˜åŒ–ï¼šå¼‚æ­¥ä¸Šä¼  (åå°å¤„ç†)

@app.post('/upload')
def upload_async(files):
    task_id = queue_upload(files)
    return {'task_id': task_id, 'status': 'processing'}
  
# ç”¨æˆ·å¯ä»¥æŸ¥è¯¢è¿›åº¦
GET /upload/{task_id}
# è¿”å›: {progress: 45%, status: 'processing'}
```

#### **4.3 åˆ†é¡µå’Œæ‡’åŠ è½½**

```python
# æœç´¢ç»“æœåˆ†é¡µ
results = kb.search(query, page=1, page_size=10)
# è¿”å›: {items: [...], total: 156, page: 1, has_next: true}
```

---

### **ç¬¬äº”ä¼˜å…ˆçº§ï¼šæ‰©å±•æ€§** ğŸš€

#### **5.1 æ’ä»¶ç³»ç»Ÿ**

```python
# æ”¯æŒè‡ªå®šä¹‰é¢„å¤„ç†
class CustomProcessor(BaseProcessor):
    def process(self, doc):
        # è‡ªå®šä¹‰å¤„ç†é€»è¾‘
        return processed_doc

kb.register_processor(CustomProcessor())
```

#### **5.2 å¤šæ•°æ®æºæ”¯æŒ**

```python
# å½“å‰ï¼šåªæ”¯æŒæœ¬åœ°æ–‡ä»¶
# ä¼˜åŒ–ï¼šæ”¯æŒå¤šæº
kb.add_from_url("https://example.com/docs")
kb.add_from_database(connection_string)
kb.add_from_api(api_endpoint)
kb.add_from_confluence(space_key)
```

#### **5.3 æ¨¡å‹é€‰æ‹©**

```python
# æ”¯æŒåˆ‡æ¢ embedding æ¨¡å‹
kb = KnowledgeBase(
    embedding_model='openai',  # or 'jina', 'bge', etc
    reranker_model='bge-large'  # æ”¯æŒå¤šä¸ª reranker
)
```

---

## ğŸ“‹ **ä¼˜åŒ–ä¼˜å…ˆçº§è¡¨**

```
ä¼˜å…ˆçº§   åŠŸèƒ½                   å·¥ä½œé‡   æ”¶ç›Š    æ¨è
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”´ P0   è¿›åº¦æ¡åé¦ˆ              1 å¤©    â­â­â­â­â­  å¿…åš
ğŸ”´ P0   æ–‡ä»¶å»é‡                1 å¤©    â­â­â­â­â­  å¿…åš
ğŸŸ  P1   æƒé™å’Œå®¡è®¡              2 å¤©    â­â­â­â­   é‡è¦
ğŸŸ  P1   æœç´¢è´¨é‡ç›‘æ§            2 å¤©    â­â­â­â­   é‡è¦
ğŸŸ¡ P2   åˆ†ç±»/æ ‡ç­¾ç³»ç»Ÿ          3 å¤©    â­â­â­   å¯é€‰
ğŸŸ¡ P2   å¢é‡æ›´æ–°                2 å¤©    â­â­â­   å¯é€‰
ğŸŸ¢ P3   ç¼“å­˜ä¼˜åŒ–                1 å¤©    â­â­    ä¼˜åŒ–
ğŸŸ¢ P3   å¼‚æ­¥å¤„ç†                2 å¤©    â­â­    ä¼˜åŒ–
âšª P4   å¤šæ•°æ®æº                5 å¤©    â­â­â­   æ‰©å±•
```

---

## ğŸ¬ **ç«‹å³è¡ŒåŠ¨é¡¹** (Next 2 weeks)

1. âœ… **ç¬¬ 1 å‘¨**

   - æ·»åŠ è¿›åº¦æ¡å’Œå®æ—¶åé¦ˆ
   - å®ç°æ–‡ä»¶å»é‡
   - æ·»åŠ åŸºç¡€ç›‘æ§é¢æ¿
2. âœ… **ç¬¬ 2 å‘¨**

   - æƒé™å’Œå®¡è®¡æ—¥å¿—
   - æœç´¢è´¨é‡ç›‘æ§
   - æ–‡æ¡£åŒ– API

---

éœ€è¦æˆ‘å¸®ä½ è¯¦ç»†å®ç°æŸä¸ªä¼˜åŒ–æ–¹å‘å—ï¼Ÿå»ºè®®å…ˆä» **P0 ä¼˜å…ˆçº§**ï¼ˆè¿›åº¦æ¡å’Œæ–‡ä»¶å»é‡ï¼‰å¼€å§‹ï¼Œè¿™ä¸¤ä¸ªæ”¹è¿›ä¼šæ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒã€‚ğŸ‘
